{"version":3,"sources":["media/icon.png","components/Map.js","components/Overlay.js","components/Loader.js","theme.js","components/Draw.js","utils/gpxSerializer.js","index.js","App.js"],"names":["module","exports","greenIcon","L","icon","iconUrl","require","iconSize","geoViewport","GPXMap","markers","bounds","updateUserMarkers","addUserMarker","step","React","useState","allMarkers","setAllMarkers","setScale","mapBounds","setMapBounds","useEffect","c","map","e","i","location","Math","round","length","mapEl","document","getElementById","getBoundingClientRect","mapDim","height","width","newBounds","flat","viewport","Map","zoom","center","id","preferCanvas","TileLayer","url","attribution","ZoomControl","position","point","index","userDefined","Marker","key","marker_index","draggable","onDragend","possibleError","CircleMarker","radius","onClick","color","Polyline","positions","console","log","getModalStyle","top","left","transform","useStyles","makeStyles","theme","paper","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","modelText","textAlign","Overlay","onUpload","open","setOpen","classes","modalStyle","handleClose","body","style","className","onChange","file","acceptedFiles","filesLimit","Modal","onClose","disableBackdropClick","aria-labelledby","aria-describedby","Loading","createMuiTheme","typography","fontFamily","join","primary","main","contrastText","text","secondary","default","breakpoints","values","lr","md","root","marginLeft","letterSpacing","zIndex","drawer","flexShrink","whiteSpace","drawerHeader","display","alignItems","mixins","toolbar","justifyContent","borderBottom","list","listStyle","paddingLeft","drawerOpen","transition","transitions","create","easing","sharp","duration","enteringScreen","drawerClose","leavingScreen","overflowX","up","settings","fontSize","fontWeight","lineHeight","marginTop","subtext","marginBottom","slider","margin","mark","ConsoleNav","onSave","setStep","Fragment","Drawer","variant","clsx","IconButton","faTimes","faBars","Button","Divider","component","Typography","window","href","buildGPX","GarminBuilder","Point","MODELS","_","serializeObjv2","activity","elevations","getStream","data","filter","times","generateTimeStream","unshift","starttime","startDate","ri","endDate","getStat","value","points","m","p","createPoint","firstLast","seq","s","push","getFirstAndLast","origin","groupBy","el","arr","splitSeqential","val","indexes","getAllIndexes","start","end","whole_time","time","whole_distance","last","j","getDistanceFromLatLonInKm","diffTime","newTime","getTime","createPointNoRef","gpxData","setSegmentPoints","toObject","lat","long","elevation","ele","Date","lat1","lon1","lat2","lon2","dLat","deg2rad","dLon","a","sin","cos","atan2","sqrt","deg","PI","ReactDOM","render","StrictMode","Helmet","rel","integrity","crossorigin","setFile","uploaderOpen","setUploaderOpen","loaderOpen","setLoaderOpen","event","setEvent","setMarkers","setBounds","calculateMapPos","min","apply","max","calculateErrors","diff","Array","keys","avg","reduce","b","pow","sd2","errors","reader","FileReader","path","split","onload","SportsLib","importFromGPX","target","result","then","getActivities","includes","catch","readAsText","importFromFit","readAsArrayBuffer","newMarkers","JSON","parse","stringify","options","_latlng","lng","marker","splice","Draw","obj","blob","Blob","type","saveAs"],"mappings":"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","file":"static/js/main.3d507ff7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import React, { useEffect } from 'react';\r\nimport { Map, Marker, TileLayer, CircleMarker, Polyline, ZoomControl } from 'react-leaflet';\r\nimport L from 'leaflet';\r\n\r\n\r\n\r\nvar greenIcon = L.icon({\r\n    iconUrl: require('../media/icon.png'),\r\n    iconSize: [15, 15]\r\n});\r\n\r\nconst geoViewport = require('@mapbox/geo-viewport');\r\n\r\n\r\n\r\nconst GPXMap = ({markers, bounds, updateUserMarkers, addUserMarker, step}) => {\r\n  const [allMarkers, setAllMarkers] = React.useState([]);\r\n  const [scale, setScale] = React.useState(1);\r\n  const [mapBounds, setMapBounds] = React.useState({});\r\n\r\n\r\n\r\n\r\n  const getLoc = () => {\r\n    var c = markers.map(function(e, i) {\r\n      return e.location;\r\n    });\r\n    setAllMarkers(c);\r\n    setScale(Math.round(c.length/step));\r\n  }\r\n\r\n  const getBounds = () => {\r\n    const mapEl = document.getElementById('map').getBoundingClientRect();  \r\n    const mapDim = [mapEl.height, mapEl.width];\r\n    var newBounds = bounds.flat();\r\n    setMapBounds(geoViewport.viewport(newBounds, mapDim));\r\n  }\r\n\r\n  useEffect(getLoc,[markers, step]);\r\n  useEffect(getBounds, [bounds]);\r\n\r\n\treturn (\r\n    <Map zoom={mapBounds.zoom-1} center={mapBounds.center} id=\"map\" preferCanvas={true}>\r\n      <TileLayer\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        attribution=\"&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors\"\r\n      />\r\n      <ZoomControl position={'topright'} />\r\n      {markers.map((point,index) => (\r\n        (!point.userDefined) ? [\r\n          (point.possibleError) ? [\r\n            <CircleMarker\r\n              key={index}\r\n              marker_index={index}\r\n              center={point.location}\r\n              radius={5}\r\n              onClick={addUserMarker}\r\n              color={point.possibleError ? 'red' : 'blue'}\r\n            />\r\n          ]:[]\r\n        ] : [\r\n        <Marker\r\n          key={index}\r\n          marker_index={index}\r\n          position={point.location}\r\n          draggable={true}\r\n          onDragend={updateUserMarkers}\r\n          icon={greenIcon}\r\n        />\r\n        ]  \r\n      ))}\r\n\r\n      <Polyline\r\n        positions={allMarkers}\r\n        color={'red'}\r\n        onClick={console.log}\r\n      />\r\n\r\n\r\n    </Map>\r\n  );\r\n}\r\n\r\nexport default GPXMap;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport { DropzoneArea } from 'material-ui-dropzone'\r\n\r\n\r\n\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: 'absolute',\r\n    width: 400,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: '2px solid #000',\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n  modelText: {\r\n    textAlign: \"center\"\r\n  }\r\n}));\r\n\r\nexport default function Overlay({onUpload, open, setOpen}) {\r\n  const classes = useStyles();\r\n  const [modalStyle] = React.useState(getModalStyle);\r\n\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const onChange = (file) => {\r\n    if (file.length > 0) {\r\n      if (onUpload(file)) {\r\n        handleClose();\r\n      }\r\n    }\r\n  }\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <DropzoneArea\r\n          onChange={onChange}\r\n          acceptedFiles={[\".gpx\", \".fit\"]}\r\n          filesLimit={1}\r\n      />\r\n      <p id=\"simple-modal-description\" className={classes.modelText}>\r\n        Upload your .gpx or .fit file here\r\n      </p>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        disableBackdropClick={true}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Modal from '@material-ui/core/Modal';\r\n\r\n\r\n\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: 'absolute',\r\n  }\r\n}));\r\n\r\nexport default function Loading({open, setOpen}) {\r\n  const classes = useStyles();\r\n  const [modalStyle] = React.useState(getModalStyle);\r\n\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const body = (\r\n    <div style={modalStyle} className={classes.paper}>\r\n      <div className=\"loading-icon\"></div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        disableBackdropClick={true}\r\n        aria-labelledby=\"simple-modal-title\"\r\n        aria-describedby=\"simple-modal-description\"\r\n      >\r\n        {body}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst breakpointValues = {\r\n  lr: 1100,\r\n  md: 800,\r\n};\r\n\r\n\r\nconst theme = createMuiTheme({\r\n    typography: {\r\n      fontFamily: [\r\n        'Maven Pro',\r\n      ].join(',')\r\n    },\r\n    palette: {\r\n      primary: {\r\n        main: \"#41B3A3\",\r\n        contrastText: \"#fff\"\r\n      },\r\n      text: {\r\n        primary: \"#fff\",\r\n        secondary: \"#41B3A3\"\r\n      },\r\n      background: {\r\n        default: \"#949494\"\r\n      },\r\n    },\r\n    breakpoints: {\r\n       values: breakpointValues,\r\n    },\r\n  });\r\n\r\n  export default theme;","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faBars, faTimes} from '@fortawesome/free-solid-svg-icons'\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport clsx from 'clsx';\r\nimport theme from '../theme';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Slider from '@material-ui/core/Slider';\r\n\r\n\r\n\r\n\r\n\r\nconst drawerWidth = '300px';\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        marginLeft: 52,\r\n        letterSpacing: 5,\r\n        position: \"relative\",\r\n        zIndex: 2\r\n    },\r\n    drawer: {\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n        whiteSpace: 'nowrap',\r\n    },\r\n    drawerHeader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        padding: theme.spacing(0, 1),\r\n        ...theme.mixins.toolbar,\r\n        justifyContent: 'flex-end',\r\n        borderBottom: \"none\",\r\n    },\r\n    list: {\r\n        listStyle: \"none\",\r\n        paddingLeft: 0,\r\n        display: \"inline-block\",\r\n    },\r\n    drawerOpen: {\r\n        zIndex: 1,\r\n        background: \"#eb6628\",\r\n        width: drawerWidth,\r\n        transition: theme.transitions.create('width', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    },\r\n    drawerClose: {\r\n        zIndex: 1,\r\n        background: \"#eb6628\",\r\n        transition: theme.transitions.create('width', {\r\n            easing: theme.transitions.easing.sharp,\r\n            duration: theme.transitions.duration.leavingScreen,\r\n        }),\r\n        overflowX: 'hidden',\r\n        width: theme.spacing(7) + 4,\r\n        [theme.breakpoints.up('sm')]: {\r\n            width: theme.spacing(9) + 1,\r\n        },\r\n    },\r\n    settings: {\r\n        marginLeft: 60,\r\n    },\r\n    text: {\r\n        letterSpacing: 5,\r\n        fontSize: \"0.875rem\",\r\n        fontWeight: 500,\r\n        lineHeight: 1.75,\r\n        marginTop: 10\r\n    },\r\n    subtext: {\r\n        marginLeft: 20,\r\n        fontSize: \"0.75rem\",\r\n        marginBottom: 10,\r\n    },\r\n    slider: {\r\n        margin: \"20px 0px 20px 40px\",\r\n        width: 160,\r\n    },\r\n    mark: {\r\n        letterSpacing: 2,\r\n        fontSize: \"0.5rem\",\r\n        fontWeight: 500,\r\n    }\r\n});\r\n\r\n\r\nconst marks = [\r\n  {\r\n    value: 0,\r\n    label: '0',\r\n  },\r\n  {\r\n    value: 100,\r\n    label: '100',\r\n  }\r\n];\r\n\r\nfunction valuetext(value) {\r\n  return `${value}`;\r\n}\r\n\r\nconst ConsoleNav = ({onSave, step, setStep}) => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n\r\n    const openDraw = () => {\r\n        setOpen(true);\r\n    };\r\n    const closeDraw = () => {\r\n        setOpen(false);\r\n    };\r\n    const redirect = () => {\r\n        window.location.href = \"https://github.com/markcNewell/garminfixer/blob/master/README.md\";\r\n    }\r\n    const updateStep = (e,v) => {\r\n        setStep(v);\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Drawer\r\n            variant=\"permanent\"\r\n            className={clsx(classes.drawer, {\r\n                [classes.drawerOpen]: open,\r\n                [classes.drawerClose]: !open,\r\n            })}\r\n            classes={{\r\n                paper: clsx({\r\n                    [classes.drawerOpen]: open,\r\n                    [classes.drawerClose]: !open,\r\n                }),\r\n            }}\r\n            >\r\n                <div className={classes.drawerHeader}>\r\n                    <IconButton  onClick={open ? closeDraw : openDraw}>\r\n                        { !open ? [\r\n                            <FontAwesomeIcon icon={faBars} />\r\n                        ] : [\r\n                            <FontAwesomeIcon icon={faTimes}/>\r\n                        ]\r\n                        }\r\n                    </IconButton>\r\n                </div>\r\n                <ul className={ classes.list }>\r\n\r\n                    <li>\r\n                        <Button color=\"inherit\" classes={{ root: classes.root }} onClick={onSave}>Save</Button>\r\n                    </li>\r\n\r\n                    <Divider variant=\"inset\" component=\"li\" />\r\n                    <li className={ classes.settings }>\r\n                        <Typography color=\"inherit\" className={ classes.text } >SETTINGS</Typography>\r\n                    </li>\r\n                    <li className={ classes.settings }>\r\n                        <Typography color=\"inherit\" className={ `${classes.text} ${classes.subtext}` } >COMMING SOON</Typography>\r\n                    </li>\r\n                    <Divider variant=\"inset\" component=\"li\" />\r\n\r\n                    <li>\r\n                        <Button color=\"inherit\" classes={{ root: classes.root }} onClick={redirect}>Documentation</Button>\r\n                    </li>\r\n\r\n                </ul>\r\n\r\n            </Drawer>\r\n        </React.Fragment>\r\n    );\r\n\r\n};\r\n\r\nexport default ConsoleNav;\r\n\r\n/*\r\n<Typography color=\"inherit\" className={ `${classes.text} ${classes.subtext}` } >MARKERS</Typography>\r\n<Slider\r\n    classes={ { root: classes.slider, markLabel: classes.mark  } }\r\n    value={step}\r\n    getAriaValueText={valuetext}\r\n    aria-labelledby=\"discrete-slider-custom\"\r\n    step={10}\r\n    valueLabelDisplay=\"auto\"\r\n    marks={marks}\r\n    onChange={updateStep}\r\n/>\r\n</li>\r\n*/","const { buildGPX, GarminBuilder } = require('gpx-builder');\r\nconst { Point } = GarminBuilder.MODELS;\r\n\r\nconst _ = require('underscore');\r\n\r\n\r\nconst getEnd = (arr) => {\r\n\treturn getStart(arr.slice(0).reverse());\r\n}\r\n\r\n\r\nconst getStart = (arr) => {\r\n\tvar start = 0;\r\n\tvar started = false;\r\n\r\n\tarr.slice(0).map( (m,i) => {\r\n\t\tif (!m.userDefined) {\r\n\t\t\tif (!started) {\r\n\t\t\t\tstarted = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!started) {\r\n\t\t\t\tstart += 1\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\treturn start;\r\n}\r\n\r\nfunction getAllIndexes(arr, val) {\r\n    var indexes = [], i;\r\n    for(i = 0; i < arr.length; i++)\r\n        if (arr[i] === val)\r\n            indexes.push(i);\r\n    return indexes;\r\n}\r\n\r\n\r\nfunction splitSeqential(origin) {\r\n\tvar c = 0, result = _.values( _.groupBy(origin, function(el, i, arr) { \r\n  \t\treturn i ? c+= (1 !== el - arr[i-1]) : 0; }) );\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction getFirstAndLast(seq) {\r\n\tvar c = [];\r\n\tfor (var s in seq) {\r\n\t\tc.push([seq[s][0], seq[s][seq[s].length-1]])\r\n\t}\r\n\treturn c;\r\n}\r\n\r\n\r\n\r\nexport const serializeObjv2 = (markers, activity) => {\r\n\r\n\t//LOOP THROUGH MARKERS, ASSIGN THE ONES THAT ARE NOT USER DEFINED TO THEIR TIMES\r\n\tvar elevations = activity.getStream('Altitude').data.filter((e) => {return e});\r\n\tvar times = activity.generateTimeStream().data.filter((e) => {return e});\r\n\ttimes.unshift(0);\r\n\tvar starttime = activity.startDate;\r\n\tvar endtime = activity.endDate;\r\n\tvar average_speed = activity.getStat('Average Speed').value; //km/s\r\n\r\n\r\n\r\n\t//var end = times.length - getEnd(markers);\r\n\t//var start = getStart(markers);\r\n\r\n\r\n\tvar ri = 0;\r\n\tvar points = markers.map((m,i) => {\r\n\r\n\t\tif (!m.userDefined) {\r\n\t\t\tvar p = createPoint(\r\n\t\t\t\tm.location[0],\r\n\t\t\t\tm.location[1],\r\n\t\t\t\televations[ri],\r\n\t\t\t\ttimes[ri],\r\n\t\t\t\tstarttime);\r\n\t\t\tri += 1;\r\n\t\t\treturn p;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t\r\n\t//GET POINTS AT END OF USER DEFINED MARKERS\r\n\tvar sections = getAllIndexes(points, null);\r\n\tvar sequences = splitSeqential(sections);\r\n\tvar firstLast = getFirstAndLast(sequences);\r\n\r\n\t\r\n\tfor (var i = 0; i < firstLast.length; i++) {\r\n\t\tvar start = firstLast[i][0];\r\n\t\tvar end = firstLast[i][1] + 1;\r\n\r\n\t\tvar whole_time = points[start-1].time - points[end].time;\r\n\t\tvar whole_distance = 0;\r\n\r\n\r\n\t\t//CALCULATE WHOLE DISTANCE FROM TWO PREDEFINED POINTS\r\n\r\n\t\tvar last = markers[start-1].location;\r\n\t\tfor (var j = start; j < end; j++) {\r\n\t\t\twhole_distance += getDistanceFromLatLonInKm(last[0], last[1], markers[j].location[0], markers[j].location[1]);\r\n\t\t}\r\n\r\n\r\n\t\t//CALCULATE NEW TIME RATIOS FOR POINTS\r\n\t\tlast = markers[start].location;\r\n\t\tfor (j = start; j < end; j++) {\r\n\t\t\tvar currentDistance = getDistanceFromLatLonInKm(last[0], last[1], markers[j].location[0], markers[j].location[1]);\r\n\t\t\tvar diffTime = (currentDistance/whole_distance) * whole_time;\r\n\t\t\tvar newTime = points[j-1].time.getTime() + (diffTime * 1000);\r\n\r\n\t\t\tpoints[j] = createPointNoRef(\r\n\t\t\t\tmarkers[j].location[0],\r\n\t\t\t\tmarkers[j].location[1],\r\n\t\t\t\televations[start],\r\n\t\t\t\tnewTime);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tconst gpxData = new GarminBuilder();\r\n\tgpxData.setSegmentPoints(points);\r\n\r\n\treturn buildGPX(gpxData.toObject())\r\n\r\n};\r\n\r\n\r\n\r\nconst createPoint = (lat, long, elevation, time, starttime) => {\r\n\treturn new Point(lat, long, {\r\n\t\tele: elevation, //314.173\r\n\t\ttime: new Date(starttime.getTime() + (time * 1000)) //'2018-06-10T17:39:35Z'\r\n\t})\r\n};\r\n\r\nconst createPointNoRef = (lat, long, elevation, time) => {\r\n\treturn new Point(lat, long, {\r\n\t\tele: elevation, //314.173\r\n\t\ttime: new Date(time) //'2018-06-10T17:39:35Z'\r\n\t})\r\n};\r\n\r\n\r\nfunction getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {\r\n  var R = 6371; // Radius of the earth in km\r\n  var dLat = deg2rad(lat2-lat1);  // deg2rad below\r\n  var dLon = deg2rad(lon2-lon1); \r\n  var a = \r\n    Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * \r\n    Math.sin(dLon/2) * Math.sin(dLon/2)\r\n    ; \r\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \r\n  var d = R * c; // Distance in km\r\n  return d;\r\n}\r\n\r\n\r\nfunction deg2rad(deg) {\r\n  return deg * (Math.PI/180)\r\n}","import React from 'react';\r\nimport { HashRouter, Switch, Route} from 'react-router-dom';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {Helmet} from \"react-helmet\";\r\nimport './index.css';\r\n\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t \t<HashRouter>\r\n\t\t\t<Helmet>\r\n\t\t\t\t<link\r\n\t\t\t\t\trel=\"stylesheet\"\r\n\t\t\t\t\thref=\"https://unpkg.com/leaflet@1.6.0/dist/leaflet.css\"\r\n\t\t\t\t\tintegrity=\"sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==\"\r\n\t\t\t\t\tcrossorigin=\"\"\r\n\t\t\t\t/>\r\n\t\t\t\t<title>Garmin Ride Fixer</title>\r\n\t\t\t</Helmet>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route component={App} path=\"/\" />\r\n\t\t\t</Switch>\r\n\t\t</HashRouter>\r\n \t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\n","import React from \"react\";\r\nimport GPXMap from './components/Map';\r\nimport Overlay from './components/Overlay';\r\nimport Loader from './components/Loader';\r\nimport Draw from './components/Draw';\r\n\r\nimport {SportsLib} from '@sports-alliance/sports-lib';\r\nimport { saveAs } from 'file-saver';\r\n\r\nimport { serializeObjv2 } from './utils/gpxSerializer';\r\n\r\n\r\n\r\n\r\nexport default function App() {\r\n\tconst [file, setFile] = React.useState([]);\r\n\r\n\tconst [uploaderOpen, setUploaderOpen] = React.useState(true);\r\n\tconst [loaderOpen, setLoaderOpen] = React.useState(false);\r\n\r\n\tconst [event, setEvent] = React.useState({});\r\n\r\n\tconst [markers, setMarkers] = React.useState([]);\r\n\tconst [bounds, setBounds] = React.useState([[36.5, -12.5],[62.5, 12.5]]);\r\n\tconst [step, setStep] = React.useState(0);\r\n\r\n\r\n\r\n\r\n\tconst onFileUpload = (file) => {\r\n\t\tsetFile(file);\r\n\t\tsetLoaderOpen(true);\r\n\r\n\t    var reader = new FileReader();\r\n\r\n\t    //IF GPX FILE.\r\n\t    if (file[0].path.split(\".\")[1] === 'gpx') {\r\n\t\t    reader.onload = (function(theFile) {\r\n\t\t        return function(e) {\r\n\r\n\t\t\t\t\tSportsLib.importFromGPX(e.target.result).then((event)=>{\r\n\t\t\t\t\t\t//GET LAT LONG PAIRS\r\n\t\t\t\t\t\tvar lat = event.getActivities()[0].getStream('Latitude').data.filter((e)=>{return e});\r\n\t\t\t\t\t\tvar long = event.getActivities()[0].getStream('Longitude').data.filter((e)=>{return e});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//CALCULATE POSSIBLE ERRORS\r\n\t\t\t\t\t\tvar errors = calculateErrors(lat,long);\r\n\r\n\r\n\t\t\t\t\t\t//CREATE OBJECT FOR EACH POINT\r\n\t\t\t\t\t\tvar c = lat.map(function(e, i) {\r\n\t\t\t\t\t\t\treturn { location:[e, long[i]], userDefined:false, possibleError:errors.includes(i) };\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t//SET VALUES\r\n\t\t\t\t\t\tsetMarkers(c);\r\n\t\t\t\t\t\tsetBounds(calculateMapPos(lat,long));\r\n\t\t\t\t\t\tsetLoaderOpen(false);\r\n\t\t\t\t\t\tsetUploaderOpen(false);\r\n\t\t\t\t\t\tsetEvent(event);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}).catch((e) => {\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t});\r\n\t\t        };\r\n\t\t      })(file[0]);\r\n\r\n\t\t    reader.readAsText(file[0]);\r\n\t   \t}\r\n\t   \t//IF FIT FILE\r\n\t   \telse if (file[0].path.split(\".\")[1] === 'fit'){\r\n\t\t    reader.onload = (function(theFile) {\r\n\t\t        return function(e) {\r\n\r\n\t\t\t\t\tSportsLib.importFromFit(e.target.result).then((event)=>{\r\n\t\t\t\t\t\t//GET LAT LONG PAIRS\r\n\t\t\t\t\t\tvar lat = event.getActivities()[0].getStream('Latitude').data.filter((e)=>{return e});\r\n\t\t\t\t\t\tvar long = event.getActivities()[0].getStream('Longitude').data.filter((e)=>{return e});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//CALCULATE POSSIBLE ERRORS\r\n\t\t\t\t\t\tvar errors = calculateErrors(lat,long);\r\n\r\n\r\n\t\t\t\t\t\t//CREATE OBJECT FOR EACH POINT\r\n\t\t\t\t\t\tvar c = lat.map(function(e, i) {\r\n\t\t\t\t\t\t\treturn { location:[e, long[i]], userDefined:false, possibleError:errors.includes(i) };\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t//SET VALUES\r\n\t\t\t\t\t\tsetMarkers(c);\r\n\t\t\t\t\t\tsetBounds(calculateMapPos(lat,long));\r\n\t\t\t\t\t\tsetLoaderOpen(false);\r\n\t\t\t\t\t\tsetUploaderOpen(false);\r\n\t\t\t\t\t\tsetEvent(event);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}).catch((e) => {\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t});\r\n\t\t        };\r\n\t\t      })(file[0]);\r\n\r\n\t\t    reader.readAsArrayBuffer(file[0]);\r\n\t   \t}\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tconst addMarker = (e) => {\r\n\t\t//CREATE NEW ERROR\r\n\t\tvar marker = {\r\n\t\t\tuserDefined: true,\r\n\t\t\tlocation: [e.target.options.center[0],e.target.options.center[1]],\r\n\t\t\tpossibleError: false\r\n\t\t}\r\n\r\n\r\n\t\t//MAKE COPY OF MARKERS ARRAY\r\n\t\tvar c = JSON.stringify(markers);\r\n\t\tvar newMarkers = JSON.parse('{ \"data\":' + c + '}');\r\n\r\n\r\n\t\t//INSERT NEW MARKER\r\n\t\tnewMarkers.data.splice(e.target.options.marker_index+1, 0, marker)\r\n\t\tsetMarkers(newMarkers.data);\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tconst updateMarkerPosition = (e) => {\r\n\t\t//MAKE COPY OF MARKERS ARRAY\r\n\t\tvar newMarkers = JSON.parse('{ \"data\":' + JSON.stringify(markers) + '}');\r\n\r\n\r\n\t\t//UPDATE POSITION OF DRAGGED MARKER\r\n\t\tnewMarkers.data[e.target.options.marker_index].location = [e.target._latlng.lat, e.target._latlng.lng];\r\n\t\tsetMarkers(newMarkers.data);\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\tconst calculateMapPos = (lat, long) => {\r\n\t\treturn [[Math.min.apply(Math,lat), Math.min.apply(Math,long)],[Math.max.apply(Math,lat), Math.max.apply(Math,long)]];\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tconst calculateErrors = (lat, long) => {\r\n\t\tvar diff = []\r\n\r\n\t\tfor (const i of Array(lat.length).keys()) {\r\n\t\t\tif (i !== 0) {\r\n\t\t\t\tdiff.push((((lat[i] - lat[i-1])**2) + ((long[i] - long[i-1])**2))**0.5);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst sum = diff.reduce((a, b) => a + b, 0);\r\n\t\tconst avg = (sum / diff.length) || 0;\r\n\r\n\t\tvar c = diff.map((e,i) => {\r\n\t\t\treturn Math.pow(e-avg,2);\r\n\t\t});\r\n\t\tvar sd = Math.pow((c.reduce((a, b) => a + b, 0) / c.length),0.5)\r\n\t\tvar sd2 = sd*4;\r\n\t\t\r\n\t\t//Everything in 4 standard deviations is 'normal'\r\n\t\tvar errors = []\r\n\t\tdiff.map((e,i) => {\r\n\t\t\tif (e > (avg + sd2)) {\r\n\t\t\t\terrors.push(i);\r\n\t\t\t\terrors.push(i+1);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\r\n\t\treturn errors;\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tconst onSave = () => {\r\n\t\tvar obj = serializeObjv2(markers, event.getActivities()[0]);\r\n\r\n\t\tvar blob = new Blob([obj], {type: \"application/gpx+xml;charset=utf-8\"});\r\n\t\tsaveAs(blob, \"StravaFixer.gpx\");\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Loader open={loaderOpen} setOpen={setLoaderOpen} />\r\n\t\t\t<Overlay onUpload={onFileUpload} open={uploaderOpen} setOpen={setUploaderOpen}/>\r\n\t\t\t<GPXMap \r\n\t\t\t\tmarkers={markers}\r\n\t\t\t\tupdateUserMarkers={updateMarkerPosition}\r\n\t\t\t\taddUserMarker={addMarker}\r\n\t\t\t\tbounds={bounds}\r\n\t\t\t\tstep={step}\r\n\t\t\t/>\r\n\t\t\t<Draw onSave={onSave} step={step} setStep={setStep}/>\r\n\t\t</React.Fragment>\r\n\t);\r\n}"],"sourceRoot":""}